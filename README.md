# ðŸ”¥Movie_Recsysæ¦‚è¿°
è¿™æ˜¯é¡¹ç›®æˆ‘åœ¨å­¦ä¹ æŽ¨èç®—æ³•é“è·¯ä¸Šå¯¹å­¦ä¹ åˆ°çš„ä¸€äº›ç†è®ºçš„å®žè·µï¼ŒåŸºäºŽMovieLens 1Mæ•°æ®é›†ï¼Œå±žäºŽä¸€ä¸ªçŽ©å…·é¡¹ç›®ã€‚é¡¹ç›®è™½ç„¶å¾ˆç®€å•ï¼Œ
ä½†æ˜¯åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘å®žçŽ°äº†ä¸€ä¸ªåŒ…å«å¬å›žå±‚ã€æŽ’åºå±‚åœ¨å†…çš„ä¸€ä¸ªå®Œæ•´çš„æŽ¨èç³»ç»Ÿï¼ŒåŒæ—¶ä¹Ÿæ¶‰åŠåˆ°äº†ç‰¹å¾å·¥ç¨‹ã€æ¨¡åž‹è¯„ä¼°ç­‰ä¸€ç³»åˆ—ä¸ºäº†æå‡æŽ¨èç³»ç»Ÿçš„æ€§èƒ½æ‰€å¿…å¤‡çš„æ“ä½œã€‚
æœ¬é¡¹ç›®çš„æ·±åº¦å­¦ä¹ æ¨¡åž‹å…¨éƒ¨ä½¿ç”¨Pytorchè¿›è¡Œæž„å»ºï¼Œæ–¹ä¾¿åƒæˆ‘ä¸€æ ·åœ¨å­¦ä¹ æŽ¨èç³»ç»Ÿä¹‹å‰åªä¼šPytorchçš„åŒå­¦ã€‚

### ðŸ”¥ðŸ”¥ðŸ”¥æ­£åœ¨æ›´æ–°
### ðŸ‘æ¬¢è¿Žå¤§å®¶å‚ä¸Žæœ¬é¡¹ç›®ðŸ’ªï¼Œå¤šStarðŸŒŸï¼Œå¤§å®¶çš„Staræ˜¯æˆ‘æœ€å¤§çš„åŠ¨åŠ›ðŸŒŸ

## çŽ¯å¢ƒå®‰è£…
- pythonç‰ˆæœ¬ï¼š3.9.24
- å®‰è£…ä¾èµ–åŒ…
```bash
pip install -r requirements.txt
```
å…¶ä¸­torchéœ€è¦æ‰‹åŠ¨ä¸‹è½½å®‰è£…ï¼Œtorchä¸‹è½½åœ°å€ï¼šhttps://download.pytorch.org/whl/torch/

## ðŸ“ˆæ•°æ®é›†ä»‹ç»
MovieLensæ•°æ®é›†1Mï¼ˆhttps://grouplens.org/datasets/movielens/ï¼‰

è¯¥æ•°æ®é›†åŒ…å«å¤§çº¦6000ä¸ªç”¨æˆ·å¯¹4000éƒ¨å·¦å³çš„ç”µå½±çš„100ä¸‡æ¡è¯„åˆ†æ•°æ®ã€‚æ¯æ¡è¯„åˆ†æ•°æ®åŒ…å«ç”¨æˆ·IDã€ç”µå½±IDã€è¯„åˆ†ï¼ˆ1-5åˆ†ï¼‰å’Œæ—¶é—´æˆ³ã€‚æ­¤å¤–ï¼Œæ•°æ®é›†ä¸­è¿˜åŒ…å«ç”µå½±çš„å…ƒä¿¡æ¯ï¼Œå¦‚æ ‡é¢˜ã€ç±»åž‹ç­‰ï¼Œä»¥åŠç”¨æˆ·çš„å…ƒä¿¡æ¯ï¼Œå¦‚å¹´é¾„ã€æ€§åˆ«ã€èŒä¸šç­‰ã€‚

æ•°æ®é›†æ–‡ä»¶è¯´æ˜Žï¼š
- ratings.datï¼šç”¨æˆ·å¯¹ç”µå½±çš„è¯„åˆ†æ•°æ®ï¼Œæ ¼å¼ä¸º user_id::movie_id::rating::timestamp
- movies.datï¼šç”µå½±çš„å…ƒä¿¡æ¯ï¼Œæ ¼å¼ä¸º movie_id::title::genres
- users.datï¼šç”¨æˆ·çš„å…ƒä¿¡æ¯ï¼Œæ ¼å¼ä¸º user_id::age::gender::occupation::zip_code
- README.txtï¼šæ•°æ®é›†çš„è¯´æ˜Žæ–‡ä»¶

è¯¦ç»†çš„å­—æ®µè¯´æ˜Žå¯ä»¥å‚è€ƒæ•°æ®é›†ä¸­çš„README.txtæ–‡ä»¶ã€‚

æ•°æ®é›†ä¿å­˜åœ¨è¯¥é¡¹ç›®çš„MovieLens_1M_dataæ–‡ä»¶å¤¹ä¸­ã€‚

### å…³äºŽMovieLens_1M_dataæ–‡ä»¶å¤¹å†…å®¹ä»‹ç»

#### åŸºæœ¬æ–‡ä»¶
|æ–‡ä»¶å|è¯´æ˜Ž|
|-------|-------|
|ratings.dat|ç”¨æˆ·å¯¹ç”µå½±çš„è¯„åˆ†æ•°æ®ï¼Œæ ¼å¼ä¸º user_id::movie_id::rating::timestamp|
|movies.dat|ç”µå½±çš„å…ƒä¿¡æ¯ï¼Œæ ¼å¼ä¸º movie_id::title::genres|
|users.dat|ç”¨æˆ·çš„å…ƒä¿¡æ¯ï¼Œæ ¼å¼ä¸º user_id::age::gender::occupation::zip_code|
|README.txt|æ•°æ®é›†çš„è¯´æ˜Žæ–‡ä»¶|
|train_test_split.ipynb|ç”¨äºŽå°†åŽŸå§‹æ•°æ®é›†åˆ’åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„Jupyter Notebookæ–‡ä»¶ï¼Œåˆ’åˆ†æ€è·¯ä¸ºé€‰å®šä¸€ä¸ªæ—¶é—´æˆ³èŠ‚ç‚¹ï¼Œç„¶åŽå°†è¯¥æ—¶é—´æˆ³ä¹‹å‰çš„æ•°æ®ä½œä¸ºè®­ç»ƒé›†ï¼Œä¹‹åŽçš„æ•°æ®ä½œä¸ºæµ‹è¯•é›†ã€‚|
|train_ratings.dat|åˆ’åˆ†å¥½çš„è®­ç»ƒé›†çš„è¯„åˆ†æ•°æ®ï¼Œæ ¼å¼åŒratings.datï¼ŒåŒ…å«ç”¨æˆ·å¯¹ç”µå½±çš„è¯„åˆ†æ•°æ®ã€‚|
|test_ratings.dat|åˆ’åˆ†å¥½çš„æµ‹è¯•é›†çš„è¯„åˆ†æ•°æ®ï¼Œæ ¼å¼åŒratings.datï¼ŒåŒ…å«ç”¨æˆ·å¯¹ç”µå½±çš„è¯„åˆ†æ•°æ®ã€‚|

#### ä½¿ç”¨LLMå¯¹æ•°æ®é›†åšäº†ä¸€äº›å¢žå¼ºçš„ç›¸å…³æ–‡ä»¶
##### movie_info_generation.py
ä½¿ç”¨LLMï¼Œæ ¹æ®movies.datä¸­çš„ç”µå½±æ ‡é¢˜ï¼Œç”Ÿæˆæ¯éƒ¨ç”µå½±çš„ç®€ä»‹ã€å¯¼æ¼”ã€ä¸»æ¼”ç­‰ä¿¡æ¯ï¼ŒLLMä»¥jsonçš„æ ¼å¼è¿”å›žï¼Œjsonçš„æ ¼å¼å¦‚ä¸‹ï¼š
```json
{
    "English_title": "ç”µå½±è‹±æ–‡åç§°",
    "Chinese_title": "ç”µå½±ä¸­æ–‡åç§°",
    "Chinese_description": "ç”µå½±ä¸­æ–‡ç®€ä»‹",
    "tags": ["æ ‡ç­¾1", "æ ‡ç­¾2"],
    "director_chinese_name": "å¯¼æ¼”ä¸­æ–‡åç§°",
    "direction_English_name": "å¯¼æ¼”è‹±æ–‡åç§°",
    "cast_English_name": ["ä¸»æ¼”è‹±æ–‡åç§°1", "ä¸»æ¼”è‹±æ–‡åç§°2"],
    "cast_Chinese_name": ["ä¸»æ¼”ä¸­æ–‡åç§°1", "ä¸»æ¼”ä¸­æ–‡åç§°2"],
    "country": "åˆ¶ç‰‡å›½å®¶/åœ°åŒº",
    "language": "è¯­è¨€",
    "release_year": "ä¸Šæ˜ æ—¶é—´",
    "duration": "ç‰‡é•¿"
}
```

##### movie_details.json
ä½¿ç”¨movie_info_generation.pyç”Ÿæˆçš„ç”µå½±è¯¦æƒ…ä¿¡æ¯ï¼ŒåŒ…å«æ¯éƒ¨ç”µå½±çš„ç®€ä»‹ã€å¯¼æ¼”ã€ä¸»æ¼”ç­‰ä¿¡æ¯ï¼Œå­˜å‚¨ä¸ºJSONæ ¼å¼çš„æ–‡ä»¶ï¼Œæ–¹ä¾¿åŽç»­ä½¿ç”¨ã€‚

Example:
```json
{
    "1": {
        "1": {
        "English_title": "Toy Story (1995)",
        "Chinese_title": "çŽ©å…·æ€»åŠ¨å‘˜",
        "Chinese_description": "ã€ŠçŽ©å…·æ€»åŠ¨å‘˜ã€‹æ˜¯ä¸€éƒ¨ç”±çš®å…‹æ–¯åŠ¨ç”»å·¥ä½œå®¤åˆ¶ä½œã€è¿ªå£«å°¼å‘è¡Œçš„åŠ¨ç”»ç”µå½±ï¼Œè®²è¿°äº†çŽ©å…·ä»¬åœ¨ä¸»äººç¦»å¼€åŽæ‹¥æœ‰çš„ç¥žå¥‡ç”Ÿå‘½ã€‚å½±ç‰‡å›´ç»•å°ä¸»äººå®‰è¿ªæœ€å–œæ¬¢çš„ç‰›ä»”èƒ¡è¿ªå±•å¼€ï¼Œä»–åŽŸæœ¬æ˜¯å®‰è¿ªæœ€å–œçˆ±çš„çŽ©å…·ï¼Œä½†éšç€æ–°çŽ©å…·â€”â€”ä¸€ä½å¤ªç©ºéª‘è­¦å·´æ–¯å…‰å¹´åŠ å…¥åŽï¼Œèƒ¡è¿ªå¼€å§‹æ‹…å¿ƒè‡ªå·±ä¼šè¢«å–ä»£ã€‚åœ¨ä¸€æ¬¡æ„å¤–ä¸­ï¼Œèƒ¡è¿ªå’Œå·´æ–¯å…‰å¹´è¢«å®‰è¿ªçš„å¦¹å¦¹å¸¦ç¦»äº†å®¶ï¼Œä»–ä»¬å¿…é¡»æºæ‰‹åˆä½œï¼Œæ‰èƒ½æ‰¾å›žå›žå®¶çš„è·¯ã€‚é€”ä¸­ï¼ŒçŽ©å…·ä»¬ç»åŽ†äº†å„ç§å†’é™©ï¼Œå½¼æ­¤ä¹‹é—´ä¹Ÿé€æ¸å»ºç«‹äº†æ·±åŽšçš„å‹è°Šã€‚å½±ç‰‡é€šè¿‡å¹½é»˜å’Œæ„Ÿäººçš„æƒ…èŠ‚ï¼ŒæŽ¢è®¨äº†å‹æƒ…ã€å¿ è¯šå’Œæˆé•¿çš„ä¸»é¢˜ã€‚",
        "tags": [
            "åŠ¨ç”»",
            "å†’é™©",
            "å–œå‰§",
            "å®¶åº­"
        ],
        "director_chinese_name": "çº¦ç¿°Â·æ‹‰å¡žç‰¹",
        "direction_English_name": "John Lasseter",
        "cast_English_name": [
            "Tom Hanks",
            "Tim Allen",
            "Don Rickles",
            "Jim Varney",
            "Wallace Shawn"
        ],
        "cast_Chinese_name": [
            "æ±¤å§†Â·æ±‰å…‹æ–¯",
            "æå§†Â·è‰¾ä¼¦",
            "å”Â·é‡Œå…‹æ–¯",
            "å‰å§†Â·ç“¦å°¼",
            "æ²ƒå°”ç‰¹Â·è‚–æ©"
        ],
        "country": "ç¾Žå›½",
        "language": "è‹±è¯­",
        "release_year": "1995",
        "duration": 81
    },
    ...
}
```

## å¦‚ä½•å®šä¹‰æ­£è´Ÿæ ·æœ¬
æ­£è´Ÿæ ·æœ¬å¦‚ä½•å®šä¹‰ï¼Œè¿™æ˜¯ä¸šåŠ¡åœºæ™¯æ¥å†³å®šçš„ã€‚å¯¹äºŽMovieLensæ•°æ®é›†ï¼Œæ‰“åˆ†æ•°æ®ä¸­ç»™å‡ºäº†ç”¨æˆ·é’ˆå¯¹æŸä¸€éƒ¨ç”µå½±çš„å…·ä½“è¯„åˆ†ï¼Œæœ‰ä¸€ç‚¹å¯ä»¥è‚¯å®šï¼Œå¯¹äºŽè¿™äº›æœ‰è¯„åˆ†çš„ç”µå½±ï¼Œç”¨æˆ·è‚¯å®šæ˜¯çœ‹è¿‡ç”µå½±å†æ¥æ‰“åˆ†çš„ï¼ˆå‡è®¾æ²¡æœ‰èƒ¡ä¹±æ‰“åˆ†çš„ç”¨æˆ·ï¼‰ã€‚å¦‚æžœæˆ‘ä»¬çš„ä¸šåŠ¡åœºæ™¯æ˜¯ç»™ç”¨æˆ·æŽ¨èç”¨æˆ·å¯èƒ½å–œæ¬¢çš„ç”µå½±ï¼Œé‚£ä¹ˆMovieLensæ•°æ®é›†å…¶å®žç¡®å®žç¼ºå¤±æˆ·æ›å…‰æœªç‚¹å‡»çš„æ ·æœ¬ã€‚åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæ­£è´Ÿæ ·æœ¬çš„å®šä¹‰å¦‚ä¸‹ï¼š
##### å¬å›žå±‚
- æ­£æ ·æœ¬ï¼šç”¨æˆ·è¯„åˆ†>=4.0çš„ç”µå½±
- è´Ÿæ ·æœ¬ï¼šbatchå†…è´Ÿé‡‡æ ·
##### æŽ’åºå±‚
- æ­£æ ·æœ¬ï¼šç”¨æˆ·è¯„åˆ†>=4.0çš„ç”µå½±
- è´Ÿæ ·æœ¬ï¼šç”¨æˆ·è¯„åˆ†<4.0çš„ç”µå½±

## è®­ç»ƒé›†ã€éªŒè¯é›†çš„åˆ’åˆ†
å¯¹äºŽæ¯ä¸€ä¸ªç”¨æˆ·ï¼Œæˆ‘ä»¬æ‰¾å‡ºå…¶æœ€åŽä¸€ä¸ªæ­£åé¦ˆçš„ç”µå½±ä½œä¸ºéªŒè¯é›†ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ ¹æ®ç”¨æˆ·çš„åŽ†å²è¯„åˆ†ï¼ŒæŽ¨èå…¶å¯èƒ½æ­£åé¦ˆçš„ç”µå½±ã€‚

## ç‰¹å¾æ¡†æž¶

æ­£åœ¨æ›´æ–°...

## å¬å›žå±‚
### å„ç§å¬å›žæ–¹å¼çš„æµ‹è¯•ç»“æžœ
|æ–‡ä»¶è·¯å¾„|è¯´æ˜Ž|HitRate@10|
|-------|-------|------|
|`recall/ItemCF/itemCF_base.py`|ItemCFï¼šåŸºäºŽç‰©æ–™çš„ååŒè¿‡æ»¤|8.3637%|

æ­£åœ¨æ›´æ–°...


# æ—¥å¿—
- 2025.10.4 
æ›´æ–°äº†ç‰¹å¾å·¥ç¨‹æ¡†æž¶ï¼Œä½¿ç”¨å·¥ä¸šç•Œæ™®éä½¿ç”¨çš„slot_idçš„æ–¹å¼è¿›è¡Œç‰¹å¾ç®¡ç†ï¼Œæ–¹ä¾¿æ·»åŠ æ–°çš„ç‰¹å¾ä»¥åŠç‰¹å¾çš„å¤ç”¨ï¼Œç›®å‰æ”¯æŒsparseç‰¹å¾ã€denseç‰¹å¾ä»¥åŠåºåˆ—ç‰¹å¾ã€‚åŽç»­ä¼šå†™ä¸€ä¸ªæ–‡æ¡£æ¥ä»‹ç»è¿™ä¸ªç‰¹å¾å·¥ç¨‹æ¡†æž¶çš„ä½¿ç”¨æ–¹æ³•ï¼Œä¾¿äºŽå¤§å®¶ä½¿ç”¨ã€‚